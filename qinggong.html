<!DOCTYPE html>
<html lang="zh_CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>天涯明月刀大轻功数据可视化</title>
    <link href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .noselect {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        .legend {
            width:100%;
            bottom:10%;
            list-style: none;
        }
        .legend li {
            cursor:pointer;
            margin: 10px 4px;
            display: inline-block;
        }
        .legend li span {
            color:white;
            text-shadow: #333 1px 1px 1px;
            box-shadow: #666 1px 1px 1px;
            padding: 6px 20px;
            border-radius:8px;
        }
        .legend .inactive {
            opacity: 0.4;
        }
        .watermark {
            position: absolute;
            top: 7px;
            right: 15px;
            font-size: 16px;
            color: #777;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">段段天刀综合助手</a>
        </div>

        <div class="collapse navbar-collapse" id="navbar">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">大轻功数据可视化</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="mailto:a@neu.la">联系我</a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<div class="container">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div class="panel panel-default">
                <div class="panel-heading">
                    说明
                </div>
                <div class="panel-body">
                    <p>
                        段段天刀助手全站正使用React重新构建中，当前页面为临时展示使用，网址将会有变化，请关注更新，感谢支持！
                    </p>
                    <hr />
                    <p>
                        作者：段段（长生剑-涂铃铃）
                        邮箱：a@neu.la QQ: 452214596

                    </p>
                    <p>
                        本页作品感谢长生剑陌忆呆呆、唐蔟、与鲤（不分先后）提供各门派账号。
                    </p>
                    <hr />
                    <h5>图表说明</h5>
                    <p>
                        以下分别是各门派速率-时间图像与路程-时间图像。点击门派名称可以切换显示隐藏曲线。每个门派曲线颜色取自游戏id颜色，比较有代表性。
                        一深一浅间隔是四段大轻功分界位置。
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    各门派大轻功速率-时间曲线、路程-时间曲线图
                </div>
                <div class="panel-body">
                    <h4>各门派大轻功速率-时间曲线</h4>
                    <hr />
                    <div class="noselect">
                        <div id="vt-legend"></div>
                        <div style="position: relative">
                            <canvas id="vt"></canvas>
                            <span class="watermark">段段制作</span>
                        </div>
                    </div>
                    <h4>各门派大轻功路程-时间曲线</h4>
                    <hr />
                    <div class="noselect">
                        <div id="st-legend"></div>
                        <div style="position: relative">
                            <canvas id="st"></canvas>
                            <span class="watermark">段段制作</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.bootcss.com/Chart.js/2.7.1/Chart.min.js"></script>
<script>
window.onload = function() {

    var allData = [
        {
            id: "taibai",
            name: "太白",
            primaryColor: "rgba(67, 208, 222, 0.6)",
            secondaryColor: "rgba(67,208,222, 0.4)",
            splitPoints: [0, 5, 9, 16],
//            data: [{"t":0.0,"v":0.0,"s":0.0},{"t":0.25,"v":0.5,"s":1.0},{"t":0.75,"v":3.5,"s":8.0},{"t":1.25,"v":5.0,"s":18.0},{"t":1.75,"v":5.0,"s":28.0},{"t":2.25,"v":5.0249378106,"s":38.0498756211},{"t":2.75,"v":7.5,"s":53.0498756211},{"t":3.25,"v":9.5,"s":72.0498756211},{"t":3.75,"v":9.5,"s":91.0498756211},{"t":4.25,"v":7.5166481892,"s":106.0831719995},{"t":4.75,"v":13.5,"s":133.0831719995},{"t":5.25,"v":12.5,"s":158.0831719995},{"t":5.75,"v":14.0089257261,"s":186.1010234517},{"t":6.25,"v":14.5,"s":215.1010234517},{"t":6.75,"v":14.0089257261,"s":243.118874904},{"t":7.25,"v":11.5,"s":266.118874904},{"t":7.75,"v":4.0,"s":274.118874904},{"t":8.25,"v":17.5,"s":309.118874904},{"t":8.75,"v":16.5075740192,"s":342.1340229424},{"t":9.25,"v":9.5,"s":361.1340229424},{"t":9.75,"v":4.5,"s":370.1340229424},{"t":10.25,"v":4.5,"s":379.1340229424},{"t":10.75,"v":4.5276925691,"s":388.1894080806},{"t":11.25,"v":4.0,"s":396.1894080806},{"t":11.75,"v":4.5,"s":405.1894080806},{"t":12.25,"v":4.5,"s":414.1894080806},{"t":12.75,"v":4.0311288741,"s":422.2516658289},{"t":13.25,"v":8.0,"s":438.2516658289},{"t":13.75,"v":4.5,"s":447.2516658289},{"t":14.25,"v":3.5,"s":454.2516658289},{"t":14.75,"v":5.5226805086,"s":465.297026846},{"t":15.25,"v":6.5,"s":478.297026846},{"t":15.75,"v":5.0,"s":488.297026846},{"t":16.25,"v":4.5,"s":497.297026846},{"t":16.75,"v":3.5,"s":504.297026846},{"t":17.25,"v":3.5,"s":511.297026846},{"t":17.75,"v":3.5,"s":518.297026846},{"t":18.25,"v":3.0,"s":524.297026846},{"t":18.75,"v":3.0,"s":530.297026846},{"t":19.25,"v":3.0,"s":536.297026846},{"t":19.75,"v":3.0413812651,"s":542.3797893763},{"t":20.25,"v":3.0,"s":548.3797893763},{"t":20.75,"v":3.0,"s":554.3797893763},{"t":21.25,"v":3.0,"s":560.3797893763},{"t":21.75,"v":3.0,"s":566.3797893763},{"t":22.25,"v":2.5,"s":571.3797893763}]
            stData: [{"t":0.0,"s":0.0},{"t":0.5,"s":1.0},{"t":1.0,"s":8.0},{"t":1.5,"s":18.0},{"t":2.0,"s":28.0},{"t":2.5,"s":38.0498756211},{"t":3.0,"s":53.0498756211},{"t":3.5,"s":72.0498756211},{"t":4.0,"s":91.0498756211},{"t":4.5,"s":106.0831719995},{"t":5.0,"s":133.0831719995},{"t":5.5,"s":158.0831719995},{"t":6.0,"s":186.1010234517},{"t":6.5,"s":215.1010234517},{"t":7.0,"s":243.118874904},{"t":7.5,"s":266.118874904},{"t":8.0,"s":274.118874904},{"t":8.5,"s":309.118874904},{"t":9.0,"s":342.1340229424},{"t":9.5,"s":361.1340229424},{"t":10.0,"s":370.1340229424},{"t":10.5,"s":379.1340229424},{"t":11.0,"s":388.1894080806},{"t":11.5,"s":396.1894080806},{"t":12.0,"s":405.1894080806},{"t":12.5,"s":414.1894080806},{"t":13.0,"s":422.2516658289},{"t":13.5,"s":438.2516658289},{"t":14.0,"s":447.2516658289},{"t":14.5,"s":454.2516658289},{"t":15.0,"s":465.297026846},{"t":15.5,"s":478.297026846},{"t":16.0,"s":488.297026846},{"t":16.5,"s":497.297026846},{"t":17.0,"s":504.297026846},{"t":17.5,"s":511.297026846},{"t":18.0,"s":518.297026846},{"t":18.5,"s":524.297026846},{"t":19.0,"s":530.297026846},{"t":19.5,"s":536.297026846},{"t":20.0,"s":542.3797893763},{"t":20.5,"s":548.3797893763},{"t":21.0,"s":554.3797893763},{"t":21.5,"s":560.3797893763},{"t":22.0,"s":566.3797893763},{"t":22.5,"s":571.3797893763}],
            vtData: [{"t":0.0,"v":0.0},{"t":0.25,"v":0.5},{"t":0.75,"v":3.5},{"t":1.25,"v":5.0},{"t":1.75,"v":5.0},{"t":2.25,"v":5.0249378106},{"t":2.75,"v":7.5},{"t":3.25,"v":9.5},{"t":3.75,"v":9.5},{"t":4.25,"v":7.5166481892},{"t":4.75,"v":13.5},{"t":5.25,"v":12.5},{"t":5.75,"v":14.0089257261},{"t":6.25,"v":14.5},{"t":6.75,"v":14.0089257261},{"t":7.25,"v":11.5},{"t":7.75,"v":4.0},{"t":8.25,"v":17.5},{"t":8.75,"v":16.5075740192},{"t":9.25,"v":9.5},{"t":9.75,"v":4.5},{"t":10.25,"v":4.5},{"t":10.75,"v":4.5276925691},{"t":11.25,"v":4.0},{"t":11.75,"v":4.5},{"t":12.25,"v":4.5},{"t":12.75,"v":4.0311288741},{"t":13.25,"v":8.0},{"t":13.75,"v":4.5},{"t":14.25,"v":3.5},{"t":14.75,"v":5.5226805086},{"t":15.25,"v":6.5},{"t":15.75,"v":5.0},{"t":16.25,"v":4.5},{"t":16.75,"v":3.5},{"t":17.25,"v":3.5},{"t":17.75,"v":3.5},{"t":18.25,"v":3.0},{"t":18.75,"v":3.0},{"t":19.25,"v":3.0},{"t":19.75,"v":3.0413812651},{"t":20.25,"v":3.0},{"t":20.75,"v":3.0},{"t":21.25,"v":3.0},{"t":21.75,"v":3.0},{"t":22.25,"v":2.5}]
        },
        {
            id: "tianxiang",
            name: "天香",
            primaryColor: "rgba(244, 138, 237, 0.6)",
            secondaryColor: "rgba(244, 138, 237, 0.4)",
            splitPoints: [0, 5, 21, 35],
            vtData: [{"t":0.0,"v":0.0},{"t":0.25,"v":5.0},{"t":0.75,"v":5.0},{"t":1.25,"v":5.0},{"t":1.75,"v":5.0},{"t":2.25,"v":1.5},{"t":2.75,"v":1.5},{"t":3.25,"v":2.0},{"t":3.75,"v":2.0},{"t":4.25,"v":2.5},{"t":4.75,"v":2.5},{"t":5.25,"v":2.5},{"t":5.75,"v":2.0},{"t":6.25,"v":2.0},{"t":6.75,"v":1.0},{"t":7.25,"v":1.5},{"t":7.75,"v":2.0},{"t":8.25,"v":2.5},{"t":8.75,"v":2.5},{"t":9.25,"v":2.5},{"t":9.75,"v":2.5},{"t":10.25,"v":2.0},{"t":10.75,"v":5.5},{"t":11.25,"v":4.0},{"t":11.75,"v":3.5},{"t":12.25,"v":3.0},{"t":12.75,"v":2.0},{"t":13.25,"v":3.5},{"t":13.75,"v":5.0},{"t":14.25,"v":6.0},{"t":14.75,"v":6.0},{"t":15.25,"v":6.5192024052},{"t":15.75,"v":6.5},{"t":16.25,"v":5.5},{"t":16.75,"v":5.0},{"t":17.25,"v":5.0},{"t":17.75,"v":5.0},{"t":18.25,"v":4.5},{"t":18.75,"v":4.0},{"t":19.25,"v":3.0},{"t":19.75,"v":2.5},{"t":20.25,"v":2.5},{"t":20.75,"v":3.0},{"t":21.25,"v":3.0},{"t":21.75,"v":4.0},{"t":22.25,"v":4.0},{"t":22.75,"v":5.0},{"t":23.25,"v":4.5},{"t":23.75,"v":4.0},{"t":24.25,"v":3.5},{"t":24.75,"v":3.0},{"t":25.25,"v":3.5},{"t":25.75,"v":2.5},{"t":26.25,"v":2.5},{"t":26.75,"v":2.0},{"t":27.25,"v":2.5},{"t":27.75,"v":4.5},{"t":28.25,"v":5.0},{"t":28.75,"v":4.5},{"t":29.25,"v":4.5},{"t":29.75,"v":4.5},{"t":30.25,"v":5.0},{"t":30.75,"v":5.0},{"t":31.25,"v":4.5},{"t":31.75,"v":3.5},{"t":32.25,"v":3.0},{"t":32.75,"v":3.0},{"t":33.25,"v":3.0},{"t":33.75,"v":3.0},{"t":34.25,"v":3.0},{"t":34.75,"v":3.0},{"t":35.25,"v":3.0},{"t":35.75,"v":3.0}],
            stData: [{"t":0.0,"s":0.0},{"t":0.5,"s":10.0},{"t":1.0,"s":20.0},{"t":1.5,"s":30.0},{"t":2.0,"s":40.0},{"t":2.5,"s":43.0},{"t":3.0,"s":46.0},{"t":3.5,"s":50.0},{"t":4.0,"s":54.0},{"t":4.5,"s":59.0},{"t":5.0,"s":64.0},{"t":5.5,"s":69.0},{"t":6.0,"s":73.0},{"t":6.5,"s":77.0},{"t":7.0,"s":79.0},{"t":7.5,"s":82.0},{"t":8.0,"s":86.0},{"t":8.5,"s":91.0},{"t":9.0,"s":96.0},{"t":9.5,"s":101.0},{"t":10.0,"s":106.0},{"t":10.5,"s":110.0},{"t":11.0,"s":121.0},{"t":11.5,"s":129.0},{"t":12.0,"s":136.0},{"t":12.5,"s":142.0},{"t":13.0,"s":146.0},{"t":13.5,"s":153.0},{"t":14.0,"s":163.0},{"t":14.5,"s":175.0},{"t":15.0,"s":187.0},{"t":15.5,"s":200.0384048104},{"t":16.0,"s":213.0384048104},{"t":16.5,"s":224.0384048104},{"t":17.0,"s":234.0384048104},{"t":17.5,"s":244.0384048104},{"t":18.0,"s":254.0384048104},{"t":18.5,"s":263.0384048104},{"t":19.0,"s":271.0384048104},{"t":19.5,"s":277.0384048104},{"t":20.0,"s":282.0384048104},{"t":20.5,"s":287.0384048104},{"t":21.0,"s":293.0384048104},{"t":21.5,"s":299.0384048104},{"t":22.0,"s":307.0384048104},{"t":22.5,"s":315.0384048104},{"t":23.0,"s":325.0384048104},{"t":23.5,"s":334.0384048104},{"t":24.0,"s":342.0384048104},{"t":24.5,"s":349.0384048104},{"t":25.0,"s":355.0384048104},{"t":25.5,"s":362.0384048104},{"t":26.0,"s":367.0384048104},{"t":26.5,"s":372.0384048104},{"t":27.0,"s":376.0384048104},{"t":27.5,"s":381.0384048104},{"t":28.0,"s":390.0384048104},{"t":28.5,"s":400.0384048104},{"t":29.0,"s":409.0384048104},{"t":29.5,"s":418.0384048104},{"t":30.0,"s":427.0384048104},{"t":30.5,"s":437.0384048104},{"t":31.0,"s":447.0384048104},{"t":31.5,"s":456.0384048104},{"t":32.0,"s":463.0384048104},{"t":32.5,"s":469.0384048104},{"t":33.0,"s":475.0384048104},{"t":33.5,"s":481.0384048104},{"t":34.0,"s":487.0384048104},{"t":34.5,"s":493.0384048104},{"t":35.0,"s":499.0384048104},{"t":35.5,"s":505.0384048104},{"t":36.0,"s":511.0384048104}]
        },
        {
            id: "zhenwu",
            name: "真武",
            primaryColor: "rgba(0, 174, 255, 0.6)",
            secondaryColor: "rgba(0, 174, 255, 0.4)",
            splitPoints: [0, 5, 14, 27],
            vtData: [{"t":0.0,"v":0.0},{"t":0.25,"v":0.5},{"t":0.75,"v":5.0},{"t":1.25,"v":5.0},{"t":1.75,"v":5.0},{"t":2.25,"v":3.0},{"t":2.75,"v":2.5},{"t":3.25,"v":1.5},{"t":3.75,"v":1.5},{"t":4.25,"v":8.5},{"t":4.75,"v":5.5},{"t":5.25,"v":5.0},{"t":5.75,"v":2.5},{"t":6.25,"v":2.0},{"t":6.75,"v":1.0},{"t":7.25,"v":2.0},{"t":7.75,"v":5.0},{"t":8.25,"v":3.0413812651},{"t":8.75,"v":3.5},{"t":9.25,"v":3.5},{"t":9.75,"v":3.5},{"t":10.25,"v":3.5},{"t":10.75,"v":3.5},{"t":11.25,"v":3.5},{"t":11.75,"v":3.5},{"t":12.25,"v":3.5},{"t":12.75,"v":3.5},{"t":13.25,"v":0.5},{"t":13.75,"v":6.5},{"t":14.25,"v":10.0},{"t":14.75,"v":16.5},{"t":15.25,"v":13.5},{"t":15.75,"v":3.5},{"t":16.25,"v":0.5},{"t":16.75,"v":0.5},{"t":17.25,"v":3.5},{"t":17.75,"v":13.5},{"t":18.25,"v":6.0},{"t":18.75,"v":2.5},{"t":19.25,"v":2.0},{"t":19.75,"v":1.0},{"t":20.25,"v":4.5},{"t":20.75,"v":10.0},{"t":21.25,"v":10.0},{"t":21.75,"v":9.0138781887},{"t":22.25,"v":9.0},{"t":22.75,"v":8.0},{"t":23.25,"v":8.0},{"t":23.75,"v":3.0},{"t":24.25,"v":3.0},{"t":24.75,"v":3.0},{"t":25.25,"v":3.0},{"t":25.75,"v":3.0},{"t":26.25,"v":3.0},{"t":26.75,"v":3.0},{"t":27.25,"v":3.0},{"t":27.75,"v":3.0},{"t":28.25,"v":3.0},{"t":28.75,"v":3.0}],
            stData: [{"t":0.0,"s":0.0},{"t":0.5,"s":1.0},{"t":1.0,"s":11.0},{"t":1.5,"s":21.0},{"t":2.0,"s":31.0},{"t":2.5,"s":37.0},{"t":3.0,"s":42.0},{"t":3.5,"s":45.0},{"t":4.0,"s":48.0},{"t":4.5,"s":65.0},{"t":5.0,"s":76.0},{"t":5.5,"s":86.0},{"t":6.0,"s":91.0},{"t":6.5,"s":95.0},{"t":7.0,"s":97.0},{"t":7.5,"s":101.0},{"t":8.0,"s":111.0},{"t":8.5,"s":117.0827625303},{"t":9.0,"s":124.0827625303},{"t":9.5,"s":131.0827625303},{"t":10.0,"s":138.0827625303},{"t":10.5,"s":145.0827625303},{"t":11.0,"s":152.0827625303},{"t":11.5,"s":159.0827625303},{"t":12.0,"s":166.0827625303},{"t":12.5,"s":173.0827625303},{"t":13.0,"s":180.0827625303},{"t":13.5,"s":181.0827625303},{"t":14.0,"s":194.0827625303},{"t":14.5,"s":214.0827625303},{"t":15.0,"s":247.0827625303},{"t":15.5,"s":274.0827625303},{"t":16.0,"s":281.0827625303},{"t":16.5,"s":282.0827625303},{"t":17.0,"s":283.0827625303},{"t":17.5,"s":290.0827625303},{"t":18.0,"s":317.0827625303},{"t":18.5,"s":329.0827625303},{"t":19.0,"s":334.0827625303},{"t":19.5,"s":338.0827625303},{"t":20.0,"s":340.0827625303},{"t":20.5,"s":349.0827625303},{"t":21.0,"s":369.0827625303},{"t":21.5,"s":389.0827625303},{"t":22.0,"s":407.1105189076},{"t":22.5,"s":425.1105189076},{"t":23.0,"s":441.1105189076},{"t":23.5,"s":457.1105189076},{"t":24.0,"s":463.1105189076},{"t":24.5,"s":469.1105189076},{"t":25.0,"s":475.1105189076},{"t":25.5,"s":481.1105189076},{"t":26.0,"s":487.1105189076},{"t":26.5,"s":493.1105189076},{"t":27.0,"s":499.1105189076},{"t":27.5,"s":505.1105189076},{"t":28.0,"s":511.1105189076},{"t":28.5,"s":517.1105189076},{"t":29.0,"s":523.1105189076}]
        },
        {
            id: "shenwei",
            name: "神威",
            primaryColor: "rgba(251, 86, 47, 0.6)",
            secondaryColor: "rgba(251, 86, 47, 0.4)",
            splitPoints: [0, 5, 11, 16],
            vtData: [{"t":0.0,"v":0.0},{"t":0.25,"v":2.5},{"t":0.75,"v":5.0},{"t":1.25,"v":5.0},{"t":1.75,"v":5.0},{"t":2.25,"v":5.0},{"t":2.75,"v":16.0},{"t":3.25,"v":3.0},{"t":3.75,"v":4.5},{"t":4.25,"v":4.0},{"t":4.75,"v":4.0},{"t":5.25,"v":4.0},{"t":5.75,"v":4.0},{"t":6.25,"v":7.0},{"t":6.75,"v":5.0},{"t":7.25,"v":2.5},{"t":7.75,"v":4.0},{"t":8.25,"v":10.5},{"t":8.75,"v":11.5},{"t":9.25,"v":9.0},{"t":9.75,"v":9.0},{"t":10.25,"v":9.5},{"t":10.75,"v":9.0},{"t":11.25,"v":9.0},{"t":11.75,"v":8.0},{"t":12.25,"v":8.0156097709},{"t":12.75,"v":8.5},{"t":13.25,"v":5.5},{"t":13.75,"v":2.0},{"t":14.25,"v":3.0},{"t":14.75,"v":4.0},{"t":15.25,"v":4.0},{"t":15.75,"v":5.0},{"t":16.25,"v":5.0},{"t":16.75,"v":6.0},{"t":17.25,"v":4.5},{"t":17.75,"v":4.5},{"t":18.25,"v":4.5},{"t":18.75,"v":5.5},{"t":19.25,"v":5.5},{"t":19.75,"v":5.0},{"t":20.25,"v":5.0},{"t":20.75,"v":4.0},{"t":21.25,"v":3.5},{"t":21.75,"v":3.5},{"t":22.25,"v":5.0},{"t":22.75,"v":6.0},{"t":23.25,"v":6.5},{"t":23.75,"v":7.5},{"t":24.25,"v":8.5},{"t":24.75,"v":9.0},{"t":25.25,"v":8.5},{"t":25.75,"v":2.5}],
            stData: [{"t":0.0,"s":0.0},{"t":0.5,"s":5.0},{"t":1.0,"s":15.0},{"t":1.5,"s":25.0},{"t":2.0,"s":35.0},{"t":2.5,"s":45.0},{"t":3.0,"s":77.0},{"t":3.5,"s":83.0},{"t":4.0,"s":92.0},{"t":4.5,"s":100.0},{"t":5.0,"s":108.0},{"t":5.5,"s":116.0},{"t":6.0,"s":124.0},{"t":6.5,"s":138.0},{"t":7.0,"s":148.0},{"t":7.5,"s":153.0},{"t":8.0,"s":161.0},{"t":8.5,"s":182.0},{"t":9.0,"s":205.0},{"t":9.5,"s":223.0},{"t":10.0,"s":241.0},{"t":10.5,"s":260.0},{"t":11.0,"s":278.0},{"t":11.5,"s":296.0},{"t":12.0,"s":312.0},{"t":12.5,"s":328.0312195419},{"t":13.0,"s":345.0312195419},{"t":13.5,"s":356.0312195419},{"t":14.0,"s":360.0312195419},{"t":14.5,"s":366.0312195419},{"t":15.0,"s":374.0312195419},{"t":15.5,"s":382.0312195419},{"t":16.0,"s":392.0312195419},{"t":16.5,"s":402.0312195419},{"t":17.0,"s":414.0312195419},{"t":17.5,"s":423.0312195419},{"t":18.0,"s":432.0312195419},{"t":18.5,"s":441.0312195419},{"t":19.0,"s":452.0312195419},{"t":19.5,"s":463.0312195419},{"t":20.0,"s":473.0312195419},{"t":20.5,"s":483.0312195419},{"t":21.0,"s":491.0312195419},{"t":21.5,"s":498.0312195419},{"t":22.0,"s":505.0312195419},{"t":22.5,"s":515.0312195419},{"t":23.0,"s":527.0312195419},{"t":23.5,"s":540.0312195419},{"t":24.0,"s":555.0312195419},{"t":24.5,"s":572.0312195419},{"t":25.0,"s":590.0312195419},{"t":25.5,"s":607.0312195419},{"t":26.0,"s":612.0312195419}]
        },
        {
            id: "wudu",
            name: "五毒",
            primaryColor: "rgba(89, 89, 255, 0.6)",
            secondaryColor: "rgba(89, 89, 255, 0.4)",
            splitPoints: [0, 5, 17, 36],
            vtData: [{"t":0.0,"v":0.0},{"t":0.25,"v":1.5},{"t":0.75,"v":5.0},{"t":1.25,"v":5.0},{"t":1.75,"v":5.0},{"t":2.25,"v":2.5},{"t":2.75,"v":3.0},{"t":3.25,"v":2.5},{"t":3.75,"v":2.5},{"t":4.25,"v":2.0},{"t":4.75,"v":2.0},{"t":5.25,"v":3.5},{"t":5.75,"v":3.5},{"t":6.25,"v":4.0},{"t":6.75,"v":3.5355339059},{"t":7.25,"v":3.5},{"t":7.75,"v":3.0},{"t":8.25,"v":2.5},{"t":8.75,"v":3.5},{"t":9.25,"v":7.0},{"t":9.75,"v":6.0},{"t":10.25,"v":4.0},{"t":10.75,"v":4.0},{"t":11.25,"v":4.5},{"t":11.75,"v":4.5},{"t":12.25,"v":3.5},{"t":12.75,"v":3.5},{"t":13.25,"v":5.0},{"t":13.75,"v":5.5},{"t":14.25,"v":6.0},{"t":14.75,"v":6.0},{"t":15.25,"v":7.0},{"t":15.75,"v":5.5},{"t":16.25,"v":5.0},{"t":16.75,"v":5.0},{"t":17.25,"v":4.0},{"t":17.75,"v":3.0413812651},{"t":18.25,"v":3.5},{"t":18.75,"v":4.5},{"t":19.25,"v":4.5},{"t":19.75,"v":5.0},{"t":20.25,"v":5.0},{"t":20.75,"v":6.0},{"t":21.25,"v":6.5},{"t":21.75,"v":6.5},{"t":22.25,"v":7.5},{"t":22.75,"v":7.5},{"t":23.25,"v":7.5},{"t":23.75,"v":7.5},{"t":24.25,"v":7.0},{"t":24.75,"v":6.0},{"t":25.25,"v":6.0},{"t":25.75,"v":5.0},{"t":26.25,"v":3.0},{"t":26.75,"v":3.0},{"t":27.25,"v":3.0413812651},{"t":27.75,"v":3.0},{"t":28.25,"v":2.0}],
            stData: [{"t":0.0,"s":0.0},{"t":0.5,"s":3.0},{"t":1.0,"s":13.0},{"t":1.5,"s":23.0},{"t":2.0,"s":33.0},{"t":2.5,"s":38.0},{"t":3.0,"s":44.0},{"t":3.5,"s":49.0},{"t":4.0,"s":54.0},{"t":4.5,"s":58.0},{"t":5.0,"s":62.0},{"t":5.5,"s":69.0},{"t":6.0,"s":76.0},{"t":6.5,"s":84.0},{"t":7.0,"s":91.0710678119},{"t":7.5,"s":98.0710678119},{"t":8.0,"s":104.0710678119},{"t":8.5,"s":109.0710678119},{"t":9.0,"s":116.0710678119},{"t":9.5,"s":130.0710678119},{"t":10.0,"s":142.0710678119},{"t":10.5,"s":150.0710678119},{"t":11.0,"s":158.0710678119},{"t":11.5,"s":167.0710678119},{"t":12.0,"s":176.0710678119},{"t":12.5,"s":183.0710678119},{"t":13.0,"s":190.0710678119},{"t":13.5,"s":200.0710678119},{"t":14.0,"s":211.0710678119},{"t":14.5,"s":223.0710678119},{"t":15.0,"s":235.0710678119},{"t":15.5,"s":249.0710678119},{"t":16.0,"s":260.0710678119},{"t":16.5,"s":270.0710678119},{"t":17.0,"s":280.0710678119},{"t":17.5,"s":288.0710678119},{"t":18.0,"s":294.1538303422},{"t":18.5,"s":301.1538303422},{"t":19.0,"s":310.1538303422},{"t":19.5,"s":319.1538303422},{"t":20.0,"s":329.1538303422},{"t":20.5,"s":339.1538303422},{"t":21.0,"s":351.1538303422},{"t":21.5,"s":364.1538303422},{"t":22.0,"s":377.1538303422},{"t":22.5,"s":392.1538303422},{"t":23.0,"s":407.1538303422},{"t":23.5,"s":422.1538303422},{"t":24.0,"s":437.1538303422},{"t":24.5,"s":451.1538303422},{"t":25.0,"s":463.1538303422},{"t":25.5,"s":475.1538303422},{"t":26.0,"s":485.1538303422},{"t":26.5,"s":491.1538303422},{"t":27.0,"s":497.1538303422},{"t":27.5,"s":503.2365928725},{"t":28.0,"s":509.2365928725},{"t":28.5,"s":513.2365928725}]
        },
        {
            id: "shendao",
            name: "神刀",
            primaryColor: "rgba(233, 51, 44, 0.6)",
            secondaryColor: "rgba(233, 51, 44, 0.4)",
            splitPoints: [0, 4, 14, 35],
            vtData: [{"t":0.0,"v":0.0},{"t":0.25,"v":3.0},{"t":0.75,"v":5.0},{"t":1.25,"v":5.0},{"t":1.75,"v":5.0},{"t":2.25,"v":6.0},{"t":2.75,"v":9.5131487952},{"t":3.25,"v":8.5},{"t":3.75,"v":7.5},{"t":4.25,"v":6.5},{"t":4.75,"v":6.5},{"t":5.25,"v":6.0},{"t":5.75,"v":5.5},{"t":6.25,"v":4.5},{"t":6.75,"v":0.0},{"t":7.25,"v":0.0},{"t":7.75,"v":0.0},{"t":8.25,"v":0.0},{"t":8.75,"v":3.5},{"t":9.25,"v":9.0},{"t":9.75,"v":6.5192024052},{"t":10.25,"v":4.5},{"t":10.75,"v":5.0},{"t":11.25,"v":2.5},{"t":11.75,"v":1.5},{"t":12.25,"v":1.5},{"t":12.75,"v":2.5},{"t":13.25,"v":2.5},{"t":13.75,"v":2.0},{"t":14.25,"v":6.5},{"t":14.75,"v":12.5},{"t":15.25,"v":4.0},{"t":15.75,"v":4.0},{"t":16.25,"v":3.5},{"t":16.75,"v":3.0},{"t":17.25,"v":3.0413812651},{"t":17.75,"v":5.5},{"t":18.25,"v":10.0},{"t":18.75,"v":7.5},{"t":19.25,"v":4.5},{"t":19.75,"v":11.0},{"t":20.25,"v":10.5},{"t":20.75,"v":9.5},{"t":21.25,"v":4.5276925691},{"t":21.75,"v":0.0},{"t":22.25,"v":0.0},{"t":22.75,"v":0.5},{"t":23.25,"v":1.0},{"t":23.75,"v":1.5},{"t":24.25,"v":1.5},{"t":24.75,"v":2.0},{"t":25.25,"v":2.5},{"t":25.75,"v":2.5},{"t":26.25,"v":3.0},{"t":26.75,"v":2.5},{"t":27.25,"v":3.0},{"t":27.75,"v":3.5},{"t":28.25,"v":3.0},{"t":28.75,"v":3.5},{"t":29.25,"v":3.0},{"t":29.75,"v":3.5},{"t":30.25,"v":3.0},{"t":30.75,"v":3.0},{"t":31.25,"v":3.0},{"t":31.75,"v":4.5},{"t":32.25,"v":6.0},{"t":32.75,"v":5.0249378106},{"t":33.25,"v":5.0},{"t":33.75,"v":4.0},{"t":34.25,"v":3.5},{"t":34.75,"v":3.0},{"t":35.25,"v":3.5},{"t":35.75,"v":3.0},{"t":36.25,"v":3.5},{"t":36.75,"v":3.0},{"t":37.25,"v":3.5},{"t":37.75,"v":3.0},{"t":38.25,"v":3.5},{"t":38.75,"v":3.0},{"t":39.25,"v":3.5},{"t":39.75,"v":3.5},{"t":40.25,"v":3.0},{"t":40.75,"v":3.5},{"t":41.25,"v":3.0}],
            stData: [{"t":0.0,"s":0.0},{"t":0.5,"s":6.0},{"t":1.0,"s":16.0},{"t":1.5,"s":26.0},{"t":2.0,"s":36.0},{"t":2.5,"s":48.0},{"t":3.0,"s":67.0262975904},{"t":3.5,"s":84.0262975904},{"t":4.0,"s":99.0262975904},{"t":4.5,"s":112.0262975904},{"t":5.0,"s":125.0262975904},{"t":5.5,"s":137.0262975904},{"t":6.0,"s":148.0262975904},{"t":6.5,"s":157.0262975904},{"t":7.0,"s":157.0262975904},{"t":7.5,"s":157.0262975904},{"t":8.0,"s":157.0262975904},{"t":8.5,"s":157.0262975904},{"t":9.0,"s":164.0262975904},{"t":9.5,"s":182.0262975904},{"t":10.0,"s":195.0647024008},{"t":10.5,"s":204.0647024008},{"t":11.0,"s":214.0647024008},{"t":11.5,"s":219.0647024008},{"t":12.0,"s":222.0647024008},{"t":12.5,"s":225.0647024008},{"t":13.0,"s":230.0647024008},{"t":13.5,"s":235.0647024008},{"t":14.0,"s":239.0647024008},{"t":14.5,"s":252.0647024008},{"t":15.0,"s":277.0647024008},{"t":15.5,"s":285.0647024008},{"t":16.0,"s":293.0647024008},{"t":16.5,"s":300.0647024008},{"t":17.0,"s":306.0647024008},{"t":17.5,"s":312.1474649311},{"t":18.0,"s":323.1474649311},{"t":18.5,"s":343.1474649311},{"t":19.0,"s":358.1474649311},{"t":19.5,"s":367.1474649311},{"t":20.0,"s":389.1474649311},{"t":20.5,"s":410.1474649311},{"t":21.0,"s":429.1474649311},{"t":21.5,"s":438.2028500693},{"t":22.0,"s":438.2028500693},{"t":22.5,"s":438.2028500693},{"t":23.0,"s":439.2028500693},{"t":23.5,"s":441.2028500693},{"t":24.0,"s":444.2028500693},{"t":24.5,"s":447.2028500693},{"t":25.0,"s":451.2028500693},{"t":25.5,"s":456.2028500693},{"t":26.0,"s":461.2028500693},{"t":26.5,"s":467.2028500693},{"t":27.0,"s":472.2028500693},{"t":27.5,"s":478.2028500693},{"t":28.0,"s":485.2028500693},{"t":28.5,"s":491.2028500693},{"t":29.0,"s":498.2028500693},{"t":29.5,"s":504.2028500693},{"t":30.0,"s":511.2028500693},{"t":30.5,"s":517.2028500693},{"t":31.0,"s":523.2028500693},{"t":31.5,"s":529.2028500693},{"t":32.0,"s":538.2028500693},{"t":32.5,"s":550.2028500693},{"t":33.0,"s":560.2527256904},{"t":33.5,"s":570.2527256904},{"t":34.0,"s":578.2527256904},{"t":34.5,"s":585.2527256904},{"t":35.0,"s":591.2527256904},{"t":35.5,"s":598.2527256904},{"t":36.0,"s":604.2527256904},{"t":36.5,"s":611.2527256904},{"t":37.0,"s":617.2527256904},{"t":37.5,"s":624.2527256904},{"t":38.0,"s":630.2527256904},{"t":38.5,"s":637.2527256904},{"t":39.0,"s":643.2527256904},{"t":39.5,"s":650.2527256904},{"t":40.0,"s":657.2527256904},{"t":40.5,"s":663.2527256904},{"t":41.0,"s":670.2527256904},{"t":41.5,"s":676.2527256904}]
        },
        {
            id: "gaibang",
            name: "丐帮",
            primaryColor: "rgba(94, 185, 46, 0.6)",
            secondaryColor: "rgba(94, 185, 46, 0.4)",
            splitPoints: [0, 6, 14, 41],
            vtData: [{"t":0.0,"v":0.0},{"t":0.25,"v":1.0},{"t":0.75,"v":4.0},{"t":1.25,"v":5.0},{"t":1.75,"v":5.0},{"t":2.25,"v":5.0},{"t":2.75,"v":4.0},{"t":3.25,"v":3.5},{"t":3.75,"v":3.5},{"t":4.25,"v":3.0},{"t":4.75,"v":2.5},{"t":5.25,"v":3.5},{"t":5.75,"v":6.0},{"t":6.25,"v":3.5},{"t":6.75,"v":2.0},{"t":7.25,"v":4.0},{"t":7.75,"v":3.5},{"t":8.25,"v":3.0},{"t":8.75,"v":3.5},{"t":9.25,"v":5.0},{"t":9.75,"v":4.0},{"t":10.25,"v":4.5},{"t":10.75,"v":3.5},{"t":11.25,"v":3.5},{"t":11.75,"v":4.5},{"t":12.25,"v":5.5},{"t":12.75,"v":5.0},{"t":13.25,"v":5.0},{"t":13.75,"v":4.5},{"t":14.25,"v":4.0},{"t":14.75,"v":3.5},{"t":15.25,"v":3.5},{"t":15.75,"v":2.5},{"t":16.25,"v":2.0},{"t":16.75,"v":1.5},{"t":17.25,"v":0.5},{"t":17.75,"v":0.5},{"t":18.25,"v":4.5},{"t":18.75,"v":8.5},{"t":19.25,"v":8.0},{"t":19.75,"v":7.0},{"t":20.25,"v":3.0},{"t":20.75,"v":3.0},{"t":21.25,"v":3.0},{"t":21.75,"v":2.5},{"t":22.25,"v":3.0},{"t":22.75,"v":5.5},{"t":23.25,"v":2.5},{"t":23.75,"v":2.5},{"t":24.25,"v":2.0},{"t":24.75,"v":2.0},{"t":25.25,"v":2.5},{"t":25.75,"v":3.5},{"t":26.25,"v":5.5},{"t":26.75,"v":5.5},{"t":27.25,"v":6.0},{"t":27.75,"v":6.0},{"t":28.25,"v":6.0},{"t":28.75,"v":6.0},{"t":29.25,"v":5.5},{"t":29.75,"v":5.0},{"t":30.25,"v":5.0249378106},{"t":30.75,"v":4.5},{"t":31.25,"v":4.5},{"t":31.75,"v":3.0},{"t":32.25,"v":3.5},{"t":32.75,"v":3.5}],
            stData: [{"t":0.0,"s":0.0},{"t":0.5,"s":2.0},{"t":1.0,"s":10.0},{"t":1.5,"s":20.0},{"t":2.0,"s":30.0},{"t":2.5,"s":40.0},{"t":3.0,"s":48.0},{"t":3.5,"s":55.0},{"t":4.0,"s":62.0},{"t":4.5,"s":68.0},{"t":5.0,"s":73.0},{"t":5.5,"s":80.0},{"t":6.0,"s":92.0},{"t":6.5,"s":99.0},{"t":7.0,"s":103.0},{"t":7.5,"s":111.0},{"t":8.0,"s":118.0},{"t":8.5,"s":124.0},{"t":9.0,"s":131.0},{"t":9.5,"s":141.0},{"t":10.0,"s":149.0},{"t":10.5,"s":158.0},{"t":11.0,"s":165.0},{"t":11.5,"s":172.0},{"t":12.0,"s":181.0},{"t":12.5,"s":192.0},{"t":13.0,"s":202.0},{"t":13.5,"s":212.0},{"t":14.0,"s":221.0},{"t":14.5,"s":229.0},{"t":15.0,"s":236.0},{"t":15.5,"s":243.0},{"t":16.0,"s":248.0},{"t":16.5,"s":252.0},{"t":17.0,"s":255.0},{"t":17.5,"s":256.0},{"t":18.0,"s":257.0},{"t":18.5,"s":266.0},{"t":19.0,"s":283.0},{"t":19.5,"s":299.0},{"t":20.0,"s":313.0},{"t":20.5,"s":319.0},{"t":21.0,"s":325.0},{"t":21.5,"s":331.0},{"t":22.0,"s":336.0},{"t":22.5,"s":342.0},{"t":23.0,"s":353.0},{"t":23.5,"s":358.0},{"t":24.0,"s":363.0},{"t":24.5,"s":367.0},{"t":25.0,"s":371.0},{"t":25.5,"s":376.0},{"t":26.0,"s":383.0},{"t":26.5,"s":394.0},{"t":27.0,"s":405.0},{"t":27.5,"s":417.0},{"t":28.0,"s":429.0},{"t":28.5,"s":441.0},{"t":29.0,"s":453.0},{"t":29.5,"s":464.0},{"t":30.0,"s":474.0},{"t":30.5,"s":484.0498756211},{"t":31.0,"s":493.0498756211},{"t":31.5,"s":502.0498756211},{"t":32.0,"s":508.0498756211},{"t":32.5,"s":515.0498756211},{"t":33.0,"s":522.0498756211}]
        },
        {
            id: "tangmen",
            name: "唐门",
            primaryColor: "rgba(169, 106, 255, 0.6)",
            secondaryColor: "rgba(169, 106, 255, 0.4)",
            splitPoints: [0, 5, 16, 36],
            vtData: [{"t":0.0,"v":0.0},{"t":0.25,"v":3.5},{"t":0.75,"v":5.5},{"t":1.25,"v":4.5},{"t":1.75,"v":5.5},{"t":2.25,"v":5.0},{"t":2.75,"v":3.5},{"t":3.25,"v":0.0},{"t":3.75,"v":5.0},{"t":4.25,"v":4.5},{"t":4.75,"v":4.5},{"t":5.25,"v":4.5},{"t":5.75,"v":3.5},{"t":6.25,"v":4.0},{"t":6.75,"v":3.0},{"t":7.25,"v":2.5},{"t":7.75,"v":0.0},{"t":8.25,"v":1.5},{"t":8.75,"v":1.0},{"t":9.25,"v":3.0},{"t":9.75,"v":1.5},{"t":10.25,"v":1.5},{"t":10.75,"v":7.0},{"t":11.25,"v":8.0},{"t":11.75,"v":1.0},{"t":12.25,"v":0.0},{"t":12.75,"v":0.0},{"t":13.25,"v":0.5},{"t":13.75,"v":0.5},{"t":14.25,"v":0.5},{"t":14.75,"v":0.5},{"t":15.25,"v":8.0},{"t":15.75,"v":8.0},{"t":16.25,"v":9.0},{"t":16.75,"v":9.5},{"t":17.25,"v":5.5},{"t":17.75,"v":5.5},{"t":18.25,"v":7.0},{"t":18.75,"v":5.5},{"t":19.25,"v":6.5},{"t":19.75,"v":2.5},{"t":20.25,"v":0.5},{"t":20.75,"v":0.5},{"t":21.25,"v":0.5},{"t":21.75,"v":0.5},{"t":22.25,"v":1.0},{"t":22.75,"v":1.0},{"t":23.25,"v":3.5},{"t":23.75,"v":2.5},{"t":24.25,"v":4.5},{"t":24.75,"v":4.0},{"t":25.25,"v":4.0},{"t":25.75,"v":4.5},{"t":26.25,"v":4.5},{"t":26.75,"v":4.5},{"t":27.25,"v":5.0},{"t":27.75,"v":5.0},{"t":28.25,"v":5.0},{"t":28.75,"v":5.0},{"t":29.25,"v":5.5},{"t":29.75,"v":5.0},{"t":30.25,"v":6.0},{"t":30.75,"v":7.5},{"t":31.25,"v":7.0},{"t":31.75,"v":7.5},{"t":32.25,"v":6.0},{"t":32.75,"v":7.5},{"t":33.25,"v":6.5},{"t":33.75,"v":3.0},{"t":34.25,"v":3.0},{"t":34.75,"v":2.5}],
            stData: [{"t":0.0,"s":0.0},{"t":0.5,"s":7.0},{"t":1.0,"s":18.0},{"t":1.5,"s":27.0},{"t":2.0,"s":38.0},{"t":2.5,"s":48.0},{"t":3.0,"s":55.0},{"t":3.5,"s":55.0},{"t":4.0,"s":65.0},{"t":4.5,"s":74.0},{"t":5.0,"s":83.0},{"t":5.5,"s":92.0},{"t":6.0,"s":99.0},{"t":6.5,"s":107.0},{"t":7.0,"s":113.0},{"t":7.5,"s":118.0},{"t":8.0,"s":118.0},{"t":8.5,"s":121.0},{"t":9.0,"s":123.0},{"t":9.5,"s":129.0},{"t":10.0,"s":132.0},{"t":10.5,"s":135.0},{"t":11.0,"s":149.0},{"t":11.5,"s":165.0},{"t":12.0,"s":167.0},{"t":12.5,"s":167.0},{"t":13.0,"s":167.0},{"t":13.5,"s":168.0},{"t":14.0,"s":169.0},{"t":14.5,"s":170.0},{"t":15.0,"s":171.0},{"t":15.5,"s":187.0},{"t":16.0,"s":203.0},{"t":16.5,"s":221.0},{"t":17.0,"s":240.0},{"t":17.5,"s":251.0},{"t":18.0,"s":262.0},{"t":18.5,"s":276.0},{"t":19.0,"s":287.0},{"t":19.5,"s":300.0},{"t":20.0,"s":305.0},{"t":20.5,"s":306.0},{"t":21.0,"s":307.0},{"t":21.5,"s":308.0},{"t":22.0,"s":309.0},{"t":22.5,"s":311.0},{"t":23.0,"s":313.0},{"t":23.5,"s":320.0},{"t":24.0,"s":325.0},{"t":24.5,"s":334.0},{"t":25.0,"s":342.0},{"t":25.5,"s":350.0},{"t":26.0,"s":359.0},{"t":26.5,"s":368.0},{"t":27.0,"s":377.0},{"t":27.5,"s":387.0},{"t":28.0,"s":397.0},{"t":28.5,"s":407.0},{"t":29.0,"s":417.0},{"t":29.5,"s":428.0},{"t":30.0,"s":438.0},{"t":30.5,"s":450.0},{"t":31.0,"s":465.0},{"t":31.5,"s":479.0},{"t":32.0,"s":494.0},{"t":32.5,"s":506.0},{"t":33.0,"s":521.0},{"t":33.5,"s":534.0},{"t":34.0,"s":540.0},{"t":34.5,"s":546.0},{"t":35.0,"s":551.0}]
        }
        ];


    function createChart(id, yLabel, datasets, legendMap) {
        var chart = Chart.Line(document.getElementById(id).getContext("2d"), {
            data: {
                datasets: datasets
            },
            options: {
                responsive: true,
                hoverMode: 'index',
                stacked: true,
                scales: {
                    xAxes: [{
                        type: "linear",
                        display: true,
                        position: "bottom",
                        id: "x-axis-common",
                        scaleLabel: {
                            display: true,
                            labelString: '时间（秒）'
                        }
                    }],
                    yAxes: [{
                        type: "linear",
                        display: true,
                        position: "left",
                        id: "y-axis-common",
                        scaleLabel: {
                            display: true,
                            labelString: yLabel
                        }
                    }]
                },
                legend: {
                    display: false
                },
                legendCallback: function(chart) {
                    var text = [];
                    text.push('<ul class="legend">');
                    Object.keys(legendMap).forEach(function (key) {
                        text.push('<li data-category="' + key + '"><span style="background-color:' +
                            legendMap[key].color + '">');
                        text.push(legendMap[key].name);
                        text.push('</span></li>');
                    });

                    text.push('</ul>');
                    return text.join("");
                }
            }
        });

        $("#" + id + "-legend").on('click', "li", function() {
            var category = $(this).data("category");
            console.log(category);

            legendMap[category].index.forEach(function (i) {
                var meta = chart.getDatasetMeta(i);
                console.log(meta);
                meta.hidden = meta.hidden === null? !chart.data.datasets[i].hidden : null;
            });
            chart.update();

            $(this).toggleClass("inactive");
        });

        $("#" + id + "-legend").html(chart.generateLegend());
    }
    
    function prepareData(originData, subset, x, y) {
        // 生成datasets
        var datasets = [].concat.apply([], originData.map(function (t) {
            // 遍历分割点
            var datasets = [];
            var data = t[subset].map(function (t) {
                return {
                    x: t[x],
                    y: t[y]
                }
            });
            for(var i = 1; i <= t.splitPoints.length; i++){
                datasets.push({
                    label: t.name,
                    category: t.id,
                    borderColor: t.primaryColor,
                    fill: true,
                    backgroundColor: i % 2 === 0 ? t.primaryColor : t.secondaryColor,
                    data: i === t.splitPoints.length ? data.slice(t.splitPoints[i-1]) : data.slice(t.splitPoints[i-1], t.splitPoints[i] + 1),
                    showLine: true
                })
            }

            return datasets;
        }));

        // 通过数据集构建反向索引
        var datasetsIndexMap = {};
        originData.forEach(function (d) {
            if(!datasetsIndexMap.hasOwnProperty(d.id))
                datasetsIndexMap[d.id] = {
                    index: [],
                    name: d.name,
                    color: d.primaryColor
                };
        });
        datasets.forEach(function (d, i) {
            datasetsIndexMap[d.category].index.push(i);
        });

        return {
            datasets: datasets,
            datasetsMap: datasetsIndexMap
        }
    }

    var vtData = prepareData(allData, "vtData", "t", "v");
    var stData = prepareData(allData, "stData", "t", "s");

    createChart("vt", "速率（米/秒）", vtData.datasets, vtData.datasetsMap);
    createChart("st", "距离（米）", stData.datasets, stData.datasetsMap);
};

</script>
</body>
</html>